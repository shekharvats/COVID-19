clear; clc; close all;
% reading downloaded data from John Hopkins github library
% reference: https://github.com/CSSEGISandData/COVID-19
T=readtable('time_series_covid19_confirmed_global.csv');
T1=readtable('time_series_covid19_deaths_global.csv');
T2=readtable('time_series_covid19_recovered_global.csv');

%% cases
time =1:1:size(T,2); 
for i=5:size(T,2)
    US(i) = cell2mat(table2cell(T(227,i)));
    Italy(i) = cell2mat(table2cell(T(139,i)));
    Spain(i) = cell2mat(table2cell(T(203,i)));
    India(i) = cell2mat(table2cell(T(133,i)));
end

for i=5:size(T,2)
    for j = 51:83 % taking into account all the provinces in China
    china_tmp(i,j) = cell2mat(table2cell(T(j,i)));
    end
end

%% deaths
for i=5:size(T1,2) 
    US_deaths(i) = cell2mat(table2cell(T1(227,i)));
    italy_deaths(i) = cell2mat(table2cell(T1(139,i)));
    spain_deaths(i) = cell2mat(table2cell(T1(203,i)));
    India_deaths(i) = cell2mat(table2cell(T1(133,i)))
end

for i=5:size(T1,2) % comparison against Chi
    for j = 51:83 % taking into account all the provinces in China
    china_tmp_deaths(i,j) = cell2mat(table2cell(T1(j,i)));
    end
end

china_total_deaths = sum(china_tmp_deaths,2);
china_total = sum(china_tmp,2);

%% recovery
for i=5:size(T,2) 
    US_recovery(i) = cell2mat(table2cell(T(227,i)));
    italy_deaths(i) = cell2mat(table2cell(T(139,i)));
    spain_deaths(i) = cell2mat(table2cell(T(203,i)));
    India_deaths(i) = cell2mat(table2cell(T(133,i)))
end

for i=5:size(T,2)
    for j = 51:83 % taking into account all the provinces in China
    china_tmp_deaths(i,j) = cell2mat(table2cell(T(j,i)));
    end
end

china_total_deaths = sum(china_tmp_deaths,2);
china_total = sum(china_tmp,2);

%% Figure

figure
plot(US,'LineWidth',2);
hold on
plot(china_total,'LineWidth',2);
plot(Italy,'LineWidth',2);
plot(Spain,'LineWidth',2); 
plot(India,'LineWidth',2); 
grid on
legend('US','China','Italy','Spain', 'India','Location','best');
set(gca,'FontSize',12);
set(gca,'FontWeight','bold');
xlabel('Time [Days]');
ylabel('Number of cases (#)');
title('COVID-19 Total # of Confirmed Cases - March 24 2020');

figure
plot(US_deaths,'LineWidth',2);
hold on
plot(china_total_deaths,'LineWidth',2);
plot(italy_deaths,'LineWidth',2);
plot(spain_deaths,'LineWidth',2); 
grid on
legend('US','China','Italy','Spain','Location','best');
set(gca,'FontSize',12);
set(gca,'FontWeight','bold');
xlabel('Time (Days)');
ylabel('Number of deaths (-)');
title('Covid 19 total number of deaths - March 24 2020');